<?xml version='1.0'?>
    <!DOCTYPE rfc SYSTEM 'rfc2629.dtd' [
        <!ENTITY rfc2119 PUBLIC '' 'http://xml.resource.org/public/rfc/bibxml/reference.RFC.2119.xml'>
        <!ENTITY rfc4271 PUBLIC '' 'http://xml.resource.org/public/rfc/bibxml/reference.RFC.4271.xml'>
        <!ENTITY rfc5492 PUBLIC '' 'http://xml.resource.org/public/rfc/bibxml/reference.RFC.5492.xml'>
        <!ENTITY rfc8174 PUBLIC '' 'http://xml.resource.org/public/rfc/bibxml/reference.RFC.8174.xml'>
        <!ENTITY rfc9000 PUBLIC '' 'http://xml.resource.org/public/rfc/bibxml/reference.RFC.9000.xml'>
        <!ENTITY I-D.chen-idr-bgp-over-quic PUBLIC ''
      'http://xml.resource.org/public/rfc/bibxml-ids/reference.I-D.draft-chen-idr-bgp-over-quic-00.xml'>
        <!ENTITY I-D.ietf-idr-bgp-multisession PUBLIC ''
      'http://xml.resource.org/public/rfc/bibxml-ids/reference.I-D.draft-ietf-idr-bgp-multisession-07.xml'>
        ]>
<?rfc  toc="yes"?>
<?rfc tocompact="no"?>
<?rfc tocdepth="6"?>
<?rfc symrefs="yes"?>
<?rfc sortrefs="yes"?>
<?rfc compact="yes"?>
<?rfc subcompact="no"?>
<?rfc strict="yes" ?>
<rfc category="std" docName="draft-xxx-idr-bgp-quic-stream-00">
  <!-- ***** FRONT MATTER ***** -->
  <front>
    <title abbrev="BGP QUIC Streams">Use of Streams in BGP over QUIC</title>

    <author initials="A" surname="Retana"
    fullname="Alvaro Retana">
      <organization>Futurewei</organization>

      <address>
       <email>aretana.ietf@gmail.com</email>
      </address>
    </author>

    <author fullname="Yingzhen Qu" initials="Y" surname="Qu">
      <organization>Futurewei</organization>
      <address>
        <postal>
          <street>2330 Central Expressway</street>
          <city>Santa Clara</city>
          <region>CA</region>
          <code>95050</code>
          <country>USA</country>
        </postal>
        <phone></phone>
        <email>yingzhen.qu@futurewei.com</email>
      </address>
    </author>


    <date/>
    <area>Routing</area>
    <workgroup>IDR Workgroup</workgroup>
    <abstract>
      <t>This draft proposes to use QUIC streams in BGP.
      </t>
    </abstract>
  </front>

  <!-- ***** MIDDLE MATTER ***** -->

  <middle>
    <section title="Introduction">
	  <t>
	    Border Gateway Protocol (BGP) uses TCP as its transport protocol.
      BGP establishes peer relationship between routers using a TCP session
      on port 179. TCP provides reliable packet communication.
    </t>
    <t>QUIC <xref target="RFC9000"/> is a new UDP-based multiplexed and
    secure transport protocol. QUIC can provide low latency and encrypted
    transport with resilient connections.
    </t>
    <t><xref target="I-D.chen-idr-bgp-over-quic"/> proposes BGP over QUIC
    and the corresponding procedures. Complementary to
    <xref target="I-D.chen-idr-bgp-over-quic"/>, this draft introduces a
    mechanism of supporting BGP multi-sessions using multiple QUIC streams. 
	  </t>
    </section>

    <section title="Requirements Language">
       <t>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL
        NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED",
        "MAY", and "OPTIONAL" in this document are to be interpreted as
        described in BCP 14 <xref target="RFC2119"/> <xref target="RFC8174"/>
        when, and only when, they appear in all capitals, as shown here.</t>
    </section>

    <section title="Motivation">
      <section title="One TCP Session">
        <t>Multiprotocol Extensions for BGP-4 (MP-BGP) allows BGP to carry
          information for multiple address families and sub-families, 
          however it only allows a single ESTABLISHED connection with
          each peer. </t>
        <t>As pointed out by <xref target="I-D.ietf-idr-bgp-multisession"/>,
        there are some disadvantages of using a single BGP session. It
        is summarized as the following:
        <list style="empty">
          <t>Most malformed messages cause BGP session to be terminated,
            and this causes all AFI/SAFIs to reset, while a malformed
            message may only impact a given AFI/SAFI. It is desirable
            to allow the impacted AFI/SAFI to be terminated or reset
            while leaving other AFI/SAFI unaffected.
          </t>
          <t>Since all AFI/SAFI packets are multiplexed into a single
            BGP session, there would be resource contention when in some
            cases. Ideally packets for routes update should be given 
            higher priorities, for example packets for IPv4 unicast
            route update should have a higher priority than packets for
            sending flow spec.
          </t>
        </list></t>

      </section>
      <section title="BGP over QUIC">
        <t><xref target="I-D.chen-idr-bgp-over-quic"/> proposes BGP 
        over QUIC. Section 4.3 describes a few options of how to map BGP
        traffic to QUIC streams in order to solve the head-of-line
        issues, but how BGP routers would interoperate with multi
        streams is not defined.</t>
        <t>This draft defines a mechanism to support BGP multi-sessions
          using QUIC streams.</t>
      </section>
	
    </section>

    <section title="Multi-Stream Capability">
      <t>-- Only valid for BGP over QUIC; ignore otherwise
         -- Options: control session vs complete independence
         --- Keepalives
         -- Backwards Compatibility (with draft-chen-idr-bgp-over-quic)</t>

      <section title="QUIC Multi-streams">
        <t>In QUIC, multiple streams can be multiplexed onto an underlying
          connection. Each stream is a separate "order stream of bytes".
          Each stream has flow control which limits bytes sent on a
          stream.</t>
      </section>
      <section title="Multiple BGP sessions over QUIC streams">
        <t>This draft proposes to start BGP peering sessions based on
          AFI/SAFI. It's possible to set but sessions use different options
          , such as proposed in <xref target="I-D.chen-idr-bgp-over-quic"/>,
          but that's out of scope of this draft.
        </t>
        <t>Connection Collision Detection procedure of the BGP specification
          <xref target="RFC4271"/> needs to be modified to allow using
          AFI/SAFI to determine the session uniqueness. Each BGP session
          operates independently.</t>
      </section>    
    </section>

    <section title="Use of Multiple OPEN Messages">
      <t> Each BGP session is established using its own OPEN message.
        New BGP capability <xref target="RFC5492"/> code to indicate
        that a BGP speaker supports multi sessions is defined.
        <list style="empty">
          <t>Capability code (1 octet): TBD</t>
          <t>Capability length (1 octet): variable</t>
          <t>Capability value (1 octet): flags followed by the AFI/SAFI
             of the session.</t>
        </list></t>
        <figure title="" suppress-title="false" align="left" alt="" width="" height="">
        <artwork xml:space="preserve" name="" type="" align="left" alt="" width="" height="">
  0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |R|  Reserved   |       AFI                     |     SAFI      |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

        </artwork>
        </figure>
        <t>R - indicates this session is a restart.</t>
        <t>Reserved - MUST be set to zero by sender, MUST be ignored 
          by receiver.</t>
        <t>AFI/SAFI - //****whether to have AFI/SAFI here or use MP-BGP capability</t>
        <t>When BGP multisession is enabled, BGP speaker MUST advertise
        Multisession capability in OPEN message on every session.</t>
    </section>

    <section title="Modifications to FSM">
      <t> TBD.
      </t>
    </section>

    <section title="Manageability Considerations">
    </section>
    <section title="Security Considerations">
      <t>TBD.

      </t>
    </section>
    <section anchor="IANA" title="IANA Considerations">

    </section>

    <section title="Acknowledgement">
      <t>
      The authors would like to thank xx for review and comments. 
      </t>
    </section>

</middle>

  <!--  *****BACK MATTER ***** -->

<back>
    <references title="Normative References">
        &rfc2119;
        &rfc4271;
        &rfc5492;
        &rfc8174;
        &rfc9000;
        &I-D.chen-idr-bgp-over-quic;
    </references>
    <references title="Informative References">
        &I-D.ietf-idr-bgp-multisession;

    </references>

</back>
</rfc>
